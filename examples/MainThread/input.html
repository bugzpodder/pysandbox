<html>
  <head>
    <script type="importmap">
      {
        "imports": {
          "polyscript": "https://esm.sh/polyscript@0.5.0"
        }
      }
    </script>
  </head>
  <body>
    <script type="module">
      import { PyMainThreadSandbox } from "/dist/index.esm.js";
      const sandbox = new PyMainThreadSandbox({
        jsApi: { getJsValue: () => "success" },
        modules: {
          "foo.py": `
import js
import pysandbox

def custom_display(target):
    pysandbox.display(js.getJsValue(), target)
`,
        },
      });
      await sandbox.init();
      await sandbox.exec(
        "import foo\nfoo.custom_display(current_target())",
        "out",
      );
    </script>
    <div id="out" data-testid="out"></div>
  </body>
</html>
